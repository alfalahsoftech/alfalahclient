

<div class="container" style="margin-top: 20px;">

 <div class="custInfo"> 
 <table >
  <tr> 
   <td> 
     <label for="email">Buyer Name:</label>
   </td>
   <td>
     <!-- <input type="text" class="form-control" style="height:33px" id="buyerName" placeholder="Enter buyer name"
      name="buyername" [(ngModel)]="custInfo.clientName"> -->
      <div class="dropdown" >
        <input type="text" placeholder="Search customer.." class="form-control" id="myCustInput" [(ngModel)]="custInfo.clientName"  autocomplete="off" (keyup)="cust_filterFunction($event)">
        <div id="myCustDropdown" class="dropdown-content" style="height: 150px;">
          <!-- list of all items -->
          <a  *ngFor="let item of custDetails"  (click)="cust_clickTheSelectedItem(item);">{{item.clientName}}</a>
        </div>
    </div>
   </td>
    
    <td> 
     <label style="margin-left:15px" for="email">Address:</label>
   </td>
   <td>
     <input type="text" class="form-control" style="height:33px" id="address" placeholder="Enter buyer address"
      name="address" [(ngModel)]="custInfo.address">
   </td>
 </tr>
 
 
 <tr > 
   <td> 
     <label fstyle="margin-top:6px" or="email">Refered By:</label>
   </td>
   <td>
     <input type="text" class="form-control" style="height:33px; margin-top:6px;"  id="gstNo" placeholder="Enter refered By"
      name="gstNo" [(ngModel)]="custInfo.gstNo">
   </td>
   
   <td> 
     <label style="margin-top:6px; margin-left:15px;" or="email">Mob #:</label>
   </td>
   <td>
     <input type="text" pattern="\d*" maxlength="10"  class="form-control" style="height:33px; margin-top:6px;"  id="contactNo" placeholder="Enter  contactNo"
      name="contactNo" [(ngModel)]="custInfo.contactNo">
   </td>
  
 </tr>
 
</table>  
</div> 
  <!-- Pay Details -->

  <div class="billGen">
    <table >
      <tr> 
       <td> 
         <label for="email">Total:</label>
       </td>
       <td>
         <input type="text" class="form-control" disabled style="height:33px; width: 150px; "  name="ttPrice" [(ngModel)]="ttPrice">
       </td>
        
        <td> 
         <label style="margin-left:15px" for="email">Pay Amt  :</label>
       </td>
       <td>
         <input type="number"  (keyup)="calcDueOnKeyUp()" (focus)="removeZero('paidAmount')" id="paidAmount" class="form-control" style="height:33px; margin-left:10px; width: 180px;"   name="paidAmount" [(ngModel)]="paidAmount">
       </td>
     </tr>
     
     
     <tr > 
       <td> 
         <label style="margin-top:6px" for="email">Due Amt:</label>
       </td>
       <td>
         <input type="text" class="form-control" style="height:33px; margin-top:6px;  width: 150px;" disabled   name="balance" [ngModel]="balance">
       </td>
       
       <td> 
         <label style="margin-top:6px;margin-left:15px;;" or="email">Due Date:</label>
       </td>
       <td>
         <input type="date" class="form-control" style="height:33px; margin-top:6px;margin-left:10px; width: 180px; "   [ngModel]="dueDate | date:'yyyy-MM-dd'" (ngModelChange)="dueDate = $event">
       </td>
     </tr>
     
     <tr > 
      <td> 
        <label fstyle="margin-top:6px" or="email">Ret. Amt:</label>
      </td>
      <td>
        <input type="text" class="form-control" disabled style="height:33px; margin-top:6px; width: 150px;"  name="returnAmt" [(ngModel)]="returnAmt">
      </td>
      
      <td> 
        <label style="margin-top:6px; margin-left:15px;" or="email"></label>
      </td>
      <td>
        <input type="button" class="btn btn-info genBtn" id="checkout"  value="Generate Bill" name="checkout"
        (click)="generateBill()" />
      </td>
    </tr>
    </table>  
  </div>
</div>

<!-- </div> -->
<div class="lastSold">
  <div class="lastSoldHdr">Previous Order</div>
  <table style="margin-left: 70px;">
    <tr style="color: white;">
      <th style="width: 410px;"  >Name</th>
      <th style="width: 79px;">MRP</th>
      <th>Qnt.</th>
    </tr>
    <tr>
      <td>{{lastSoldMediDtls.mediName}}</td>
      <td>{{lastSoldMediDtls.unitCost}}</td>
      <td>{{lastSoldMediDtls.quantity}}</td>
    </tr>
  </table>
  
</div>
<div *ngIf="isWithoutOrderBilling"> 
<!-- <span style="color: red; margin-left: 30px;">{{alrt}}</span>  <span style="color: slateblue;">{{selectedMediName}}</span> -->
<div class="container" >
  <table style="margin-left: -80px; margin-bottom: -16px;">
    <tr>
      <td>
        <input type="text" class="form-control" style="height:33px; width: 150px;margin-left:-80px"
        [(ngModel)]="inputVal" (keyup)="calculate()" placeholder="Calculator">
       
      </td>
      <td>
      </td>
      <td style="width: 100px;">
        =  {{showDataum | number}}
      </td>
      <td>
        <input style="width: 41px; height: 21px;" type="radio"  id ="calOn"  value="1" name="calOn" checked>On MRP
      </td>
      <td></td>
      <td>
        <input   style="width: 41px; height: 21px;"  type="radio" id= "calOn" value="2" name="calOn">On NetRate
      </td>
      <td>  
          <div class="dropdown" style="margin-left: 100px;">
            <input type="text" class="form-control"  tabindex="1" placeholder="Search medicine.." id="myInput" [(ngModel)]="myInput"  autocomplete="off" (keyup)="filterFunction($event)">
            <div id="myDropdown" class="dropdown-content" style="height: 250px;">
              <!-- list of all items -->
              <a  *ngFor="let item of medicinesArray"  (click)="clickTheSelectedItem(item);">{{item.mediName}}</a>
            </div>
          </div>
              <!-- <input class="form-control" style="margin-left: 100px;width: 300px;" type="text" name="search" [(ngModel)]="query" autocomplete="off" placeholder="Search medicine name"> -->
      </td>
    </tr>
    
   
  </table>
</div>  

 <div class="item">
  
  <table class="table table-striped table-bordered no-margin">
      <thead>
      <tr style="text-align: center;">
        <th style="width: 180px;"  >Medicine Name</th>
        <th>M.R.P</th>
        <th>Net Rate</th>
        <th>Exp.Date</th>
        <th colspan="2" >Discount</th>
        <th>On Hand</th>
        <th colspan="2">Bonus</th>
        <th style="width: 120px;">Mfg. By</th>
        <!-- <th>Notes</th> -->
        <th>Qntity</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody >
      <tr *ngFor="let item of showDummyDataArray  ">

       <td class="choppOff" title="{{item.mediName}}">{{item.mediName}}</td>
       <td style="text-align: right;" ><b>{{item.mrp}} </b></td>
       <td style="text-align: right;" >{{item.netRate}}</td>
       <td style="text-align: center;" >{{item.expDate | date:'MM/yy'}}</td>
       <td>
        <b>{{item.purchPerc}}</b>
      </td>
       <td>
        <input tabindex="2" style="width: 60px; height: 30px;" type="number" class="form-control"  id="item.discount"  name="item.discount" [(ngModel)]="item.discount">
      </td>
       <td style="text-align: right;" >{{item.onHand}}</td>
       <td  style="text-align: center;"><b>{{item.scheme}}</b></td>
       <td>
        <input  tabindex="3" style="width: 60px; height: 30px; " type="text" class="form-control"  id="item.bonus"  name="item.bonus" [(ngModel)]="item.bonus">
      </td>
       <td   style="text-align: center; width: 120px;" class="choppOff" title="{{item.mfgBy}}">{{item.mfgBy}}</td>
       <td  style="text-align: center;" >
        <input tabindex="4"  style="width: 70px; height: 30px;" type="number" class="form-control"  id="item.qnt"  name="item.qnt" [(ngModel)]="item.qnt">
       </td>
       <td style="text-align: center;" >
        <button tabindex="5" style="height:1.5rem;  padding: 0.1rem;" class="btn btn-info" (click)="addMedi(item)">Add</button>
        </td>
      </tr>
    </tbody>
  </table>
  <div *ngIf="showDummyDataArray && showDummyDataArray.length==0" class="noDataToDisp_search"><b> No data to display</b></div>
</div>

  &nbsp; &nbsp;&nbsp;


  <div class="pay">
    <table id="tbl" class="table table-striped table-bordered no-margin">

      <colgroup>
        <col width="1%">
        <col width="20%">
        <col width="3%">
        <col width="15%">
        <col width="1%">
      </colgroup>
      <thead>
        <tr style="text-align: center;">
          <th>S.No.</th>
          <th style="width: 180px;">Item Name</th>
          <th>Qnty</th>
          <th>Disc%</th>
          <th>Scheme</th>
          <th>Sub-Total</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let itemSold of  selectedMediList ; let i=index">
          <td style="text-align: center;"> {{i+1}}</td>
          <td style="text-align: center;" class="choppOff" title="{{itemSold.name}}">{{itemSold.mediName}}</td>
          <td style="text-align: right;" >{{itemSold.quantity}}</td>
          <td style="text-align: right;" >{{itemSold.discount}}</td>
          <td style="text-align: center;">{{itemSold.scheme}}</td>
          <td style="text-align: right;" >{{itemSold.subTotal | number}}</td>
          <td style="text-align: center;" >
            <button style="height:1.5rem;    padding: 0.1rem;" class="btn btn-info"
              (click)="delete(itemSold)">Del</button>
          </td>
        </tr>
      </tbody>
    </table>
    <div *ngIf="selectedMediList && selectedMediList.length==0" class="noDataToDisp_search"><b> No data to display</b></div>
  </div>
  <div class="total">
    <table class="table table-striped table-bordered no-margin">
      <tbody>
        <tr>
          <td>Total Item: {{ttNoOfItems}}</td>
          <td>Total Qnty: {{ttQnt}}</td>
          <td>Total Price: {{ttPrice | number}}</td>
        </tr>
      </tbody>
    </table>
  </div>

</div>
<!--        ##################################################################################### -->
<div *ngIf="isOrderBilling">

  <div class="pay">
    <table id="tbl" class="table table-striped table-bordered no-margin">

      <colgroup>
        <col width="1%">
        <col width="20%">
        <col width="3%">
        <col width="15%">
        <col width="1%">
      </colgroup>
      <thead>
        <tr>
          <th>S.No.</th>
          <th>Item Name</th>
          <th>Quantity</th>
          <th>Total Price Per Item</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
      
        <tr *ngFor="let itemSold of oderedItemsArray; let i=index">
          <td>{{i+1}}</td>
          <td>{{itemSold.name}}</td>
          <td>{{itemSold.quantity}}</td>
          <!-- <td>
             <input type="number" class="form-control " id="quantity" placeholder="0" name="itemSold.quantity"
            [(ngModel)]="quantity">
          </td> -->
          <td>{{itemSold.totalPrice | number}}</td>
          <td>
            <button style="height:1.5rem;    padding: 0.1rem;" class="btn btn-info"
              (click)="delete(itemSold)">Del</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="total">
    <table class="table table-striped table-bordered no-margin">
      <tbody>
        <tr>
          <td>Total Item: {{ttNoOfItems}}</td>
          <td>Total Qnty: {{ttQnt}}</td>
          <td>Total Price: {{ttPrice | number}}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>